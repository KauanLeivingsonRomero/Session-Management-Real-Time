(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{3640:(e,s,n)=>{Promise.resolve().then(n.bind(n,829))},829:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>u});var i=n(7437),t=n(2265),a=n(8472),l=n(6404),o=n(668);function r(){let{menuCount:e,session17:s,session18:n,session19:r,session20:c,session21:u,session22:d,session17Limit:m,session18Limit:p,session19Limit:h,session20Limit:b,session21Limit:x,session22Limit:_}=(0,t.useContext)(l.B),{acompanhante:f}=(0,t.useContext)(o.V),g=async e=>{await a.Z.post("".concat("https://app.diib.io/vagas-next/","/proc/Controllers/takeSession.php"),{session_id:e.session_id,session_time:e.session_time,acompanhante:f}).then(()=>{console.log(s)})};return(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("div",{className:"flex flex-col p-10 text-black text-center rounded bg-white",children:[(0,i.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[e>0?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,i.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,i.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,i.jsx)("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,i.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]})}),(0,i.jsxs)("p",{className:"text-start",children:["Usuarios ativos: ",e]})]}),(0,i.jsx)("h1",{className:"font-bold text-2xl mb-10",children:"Sessoes disponiveis"}),(0,i.jsx)("div",{className:"flex flex-wrap gap-4",children:[{session_id:1,session_time:"17:00",session_users:s,session_limit:m},{session_id:2,session_time:"18:00",session_users:n,session_limit:p},{session_id:3,session_time:"19:00",session_users:r,session_limit:h},{session_id:4,session_time:"20:00",session_users:c,session_limit:b},{session_id:5,session_time:"21:00",session_users:u,session_limit:x},{session_id:6,session_time:"22:00",session_users:d,session_limit:_}].map(e=>{let s=e.session_limit-e.session_users;return(0,i.jsxs)("div",{className:"flex gap-2 flex-col",children:[(0,i.jsxs)("div",{className:"text-center flex items-center justify-center gap-2",children:[e.session_users>0?(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,i.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,i.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})}):(0,i.jsx)(i.Fragment,{children:(0,i.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,i.jsx)("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,i.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]})}),(0,i.jsx)("div",{children:e.session_users})]}),(0,i.jsx)("button",{disabled:f?s<2:s<1,id:"session_".concat(e.session_time),onClick:()=>g(e),className:"rounded ring-2 ring-blue-500 p-6 active:bg-blue-200 hover:bg-blue-100 disabled:opacity-50 disabled:bg-zinc-600 disabled:border-red-500",children:(0,i.jsx)("h2",{children:e.session_time})},"session_".concat(e.session_time))]},e.session_id)})})]})})}var c=n(6463);let u=()=>{let{channel:e}=(0,t.useContext)(o.V),s=(0,c.useRouter)();return(0,t.useEffect)(()=>{null==e&&s.back()},[e]),(0,i.jsx)("div",{className:"flex justify-center items-center h-screen",style:{background:"linear-gradient(146deg, rgba(157,49,221,1) 23%, rgba(25,25,194,1) 87%)"},children:(0,i.jsx)(r,{})})}},668:(e,s,n)=>{"use strict";n.d(s,{V:()=>o,default:()=>r});var i=n(7437),t=n(2265),a=n(2122),l=n.n(a);let o=(0,t.createContext)({pusher:null,setPusher:()=>{},channel:null,setChannel:()=>{},pusherAcomp:null,setPusherAcomp:()=>{},channelAcomp:null,setChannelAcomp:()=>{},userName:"",setUserName:()=>{},userEmail:"",setUserEmail:()=>{},acompanhante:!1,setAcompanhante:()=>{}}),r=e=>{let{children:s}=e,[n,a]=(0,t.useState)(null),[r,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[m,p]=(0,t.useState)(null),[h,b]=(0,t.useState)(""),[x,_]=(0,t.useState)(""),[f,g]=(0,t.useState)(!1);return l().logToConsole=!0,(0,t.useEffect)(()=>{if(h&&x&&f){console.log("teste com acompanhante");let e=new(l())("".concat("1f678673e53816425e3a"),{cluster:"".concat("sa1"),authEndpoint:"".concat("https://app.diib.io/vagas-next/","/proc/Controllers/server.php"),auth:{headers:{"Content-Type":"application/json"},params:{name:h,email:x,acompanhante:f}}}),s=new(l())("".concat("1f678673e53816425e3a"),{cluster:"".concat("sa1"),authEndpoint:"".concat("https://app.diib.io/vagas-next/","proc/Controllers/server.php"),auth:{headers:{"Content-Type":"application/json"},params:{name:"".concat(h,"_acomp"),email:"".concat(x,"_acomp")}}});return e.connection.bind("connected",()=>{d(e.subscribe("presence-menu-channel"))}),s.connection.bind("connected",()=>{p(s.subscribe("presence-menu-channel"))}),a(e),c(s),()=>{e.disconnect()}}if(h&&x){console.log("teste sem acompanhante");let e=new(l())("".concat("1f678673e53816425e3a"),{cluster:"".concat("sa1"),authEndpoint:"".concat("https://app.diib.io/vagas-next/","proc/Controllers/server.php"),auth:{headers:{"Content-Type":"application/json"},params:{name:h,email:x}}});return e.connection.bind("connected",()=>{d(e.subscribe("presence-menu-channel"))}),a(e),()=>{e.disconnect()}}},[h,x,f]),(0,i.jsx)(o.Provider,{value:{pusher:n,setPusher:a,channel:u,setChannel:d,userName:h,setUserName:b,userEmail:x,setUserEmail:_,acompanhante:f,setAcompanhante:g,pusherAcomp:r,setPusherAcomp:c,channelAcomp:m,setChannelAcomp:p},children:s})}},6404:(e,s,n)=>{"use strict";n.d(s,{B:()=>r,default:()=>c});var i=n(7437),t=n(2265),a=n(668),l=n(6463),o=n(8472);let r=(0,t.createContext)({menuCount:0,setMenuCount:()=>{},session17:0,setSession17:()=>{},session17Limit:0,setSession17Limit:()=>{},session18:0,setSession18:()=>{},session18Limit:0,setSession18Limit:()=>{},session19:0,setSession19:()=>{},session19Limit:0,setSession19Limit:()=>{},session20:0,setSession20:()=>{},session20Limit:0,setSession20Limit:()=>{},session21:0,setSession21:()=>{},session21Limit:0,setSession21Limit:()=>{},session22:0,setSession22:()=>{},session22Limit:0,setSession22Limit:()=>{}}),c=e=>{let{children:s}=e,[n,c]=(0,t.useState)(0),[u,d]=(0,t.useState)(0),[m,p]=(0,t.useState)(0),[h,b]=(0,t.useState)(0),[x,_]=(0,t.useState)(0),[f,g]=(0,t.useState)(0),[v,j]=(0,t.useState)(0),[S,N]=(0,t.useState)(0),[w,k]=(0,t.useState)(0),[C,y]=(0,t.useState)(0),[E,L]=(0,t.useState)(0),[A,F]=(0,t.useState)(0),[P,T]=(0,t.useState)(0),{channel:V}=(0,t.useContext)(a.V),M=(0,l.useRouter)();return(0,t.useEffect)(()=>{(async()=>{try{let e=(await o.Z.get("".concat("https://app.diib.io/vagas-next/","/proc/Controllers/session.php"))).data;console.log(e),e.forEach(e=>{switch(e.session_time){case"17:00":d(e.session_users),p(e.session_limit);break;case"18:00":k(e.session_users),b(e.session_limit);break;case"19:00":y(e.session_users),_(e.session_limit);break;case"20:00":L(e.session_users),g(e.session_limit);break;case"21:00":F(e.session_users),j(e.session_limit);break;case"22:00":T(e.session_users),N(e.session_limit)}})}catch(e){console.error("Erro ao buscar sess\xf5es:",e)}})()},[]),(0,t.useEffect)(()=>{null==V||V.bind("pusher:subscription_succeeded",e=>{c(e.count),M.replace("/horarios")}),null==V||V.bind("pusher:member_added",()=>{c(e=>e+1),console.log("Member added")}),null==V||V.bind("pusher:member_removed",()=>{c(e=>e-1),console.log("Member removed")}),null==V||V.bind("client-consume",e=>{if(console.log(e),e.acompanhante)switch(e.session_time){case"17:00":d(e=>e+2);break;case"18:00":k(e=>e+2);break;case"19:00":y(e=>e+2);break;case"20:00":L(e=>e+2);break;case"21:00":F(e=>e+2);break;case"22:00":T(e=>e+2)}else switch(e.session_time){case"17:00":d(e=>e+1);break;case"18:00":k(e=>e+1);break;case"19:00":y(e=>e+1);break;case"20:00":L(e=>e+1);break;case"21:00":F(e=>e+1);break;case"22:00":T(e=>e+1)}})},[V]),(0,i.jsx)(r.Provider,{value:{menuCount:n,setMenuCount:c,session17:u,setSession17:d,session18:w,setSession18:k,session19:C,setSession19:y,session20:E,setSession20:L,session21:A,setSession21:F,session22:P,setSession22:T,session17Limit:m,session18Limit:h,session19Limit:x,session20Limit:f,session21Limit:v,session22Limit:S,setSession17Limit:p,setSession18Limit:b,setSession19Limit:_,setSession20Limit:g,setSession21Limit:j,setSession22Limit:N},children:s})}}},e=>{var s=s=>e(e.s=s);e.O(0,[122,236,130,215,744],()=>s(3640)),_N_E=e.O()}]);