(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[565],{3640:(e,s,n)=>{Promise.resolve().then(n.bind(n,829))},829:(e,s,n)=>{"use strict";n.r(s),n.d(s,{default:()=>u});var a=n(7437),t=n(2265),i=n(8472),l=n(6404),o=n(668);function r(){let{menuCount:e,session17:s,session18:n,session19:r,session20:c,session21:u,session22:d}=(0,t.useContext)(l.B),{acompanhante:p}=(0,t.useContext)(o.V),m=async e=>{await i.Z.post("".concat("https://app.diib.io/vagas-next/","/proc/Controllers/takeSession.php"),{session_id:e.session_id,session_time:e.session_time,acompanhante:p}).then(()=>{console.log(s)})};return(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("div",{className:"flex flex-col p-10 text-black text-center rounded bg-white",children:[(0,a.jsxs)("div",{className:"flex flex-row gap-2 items-center",children:[e>0?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]})}),(0,a.jsxs)("p",{className:"text-start",children:["Usuarios ativos: ",e]})]}),(0,a.jsx)("h1",{className:"font-bold text-2xl mb-10",children:"Sessoes disponiveis"}),(0,a.jsx)("div",{className:"flex flex-wrap gap-4",children:[{session_id:1,session_time:"17:00",session_users:s},{session_id:2,session_time:"18:00",session_users:n},{session_id:3,session_time:"19:00",session_users:r},{session_id:4,session_time:"20:00",session_users:c},{session_id:5,session_time:"21:00",session_users:u},{session_id:6,session_time:"22:00",session_users:d}].map(e=>(0,a.jsxs)("div",{className:"flex gap-2 flex-col",children:[(0,a.jsxs)("div",{className:"text-center flex items-center justify-center gap-2",children:[e.session_users>0?(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,a.jsx)("span",{className:"animate-ping absolute inline-flex h-full w-full rounded-full bg-green-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-green-500"})]})}):(0,a.jsx)(a.Fragment,{children:(0,a.jsxs)("span",{className:"relative flex h-2 w-2",children:[(0,a.jsx)("span",{className:"absolute inline-flex h-full w-full rounded-full bg-red-400 opacity-75"}),(0,a.jsx)("span",{className:"relative inline-flex rounded-full h-2 w-2 bg-red-500"})]})}),(0,a.jsx)("div",{className:"",children:e.session_users})]}),(0,a.jsx)("button",{disabled:e.session_users>=10,id:"session_${item.session_time}",onClick:()=>m(e),className:"rounded ring-2 ring-blue-500 p-6 active:bg-blue-200 hover:bg-blue-100 disabled:opacity-50 disabled:bg-zinc-600 disabled:border-red-500",children:(0,a.jsx)("h2",{children:e.session_time})},"session_${item.session_time}")]},e.session_id))})]})})}var c=n(6463);let u=()=>{let{channel:e}=(0,t.useContext)(o.V),s=(0,c.useRouter)();return(0,t.useEffect)(()=>{null==e&&s.replace("/")},[e]),(0,a.jsx)("div",{className:"flex justify-center items-center h-screen",style:{background:"linear-gradient(146deg, rgba(157,49,221,1) 23%, rgba(25,25,194,1) 87%)"},children:(0,a.jsx)(r,{})})}},668:(e,s,n)=>{"use strict";n.d(s,{V:()=>o,default:()=>r});var a=n(7437),t=n(2265),i=n(2122),l=n.n(i);let o=(0,t.createContext)({pusher:null,setPusher:()=>{},channel:null,setChannel:()=>{},pusherAcomp:null,setPusherAcomp:()=>{},channelAcomp:null,setChannelAcomp:()=>{},userName:"",setUserName:()=>{},userEmail:"",setUserEmail:()=>{},acompanhante:!1,setAcompanhante:()=>{}}),r=e=>{let{children:s}=e,[n,i]=(0,t.useState)(null),[r,c]=(0,t.useState)(null),[u,d]=(0,t.useState)(null),[p,m]=(0,t.useState)(null),[h,b]=(0,t.useState)(""),[x,f]=(0,t.useState)(""),[_,g]=(0,t.useState)(!1);return l().logToConsole=!0,(0,t.useEffect)(()=>{if(h&&x&&_){console.log("teste com acompanhante");let e=new(l())("".concat("1f678673e53816425e3a"),{cluster:"".concat("sa1"),authEndpoint:"".concat("https://app.diib.io/vagas-next/","/proc/Controllers/server.php"),auth:{headers:{"Content-Type":"application/json"},params:{name:h,email:x,acompanhante:_}}}),s=new(l())("".concat("1f678673e53816425e3a"),{cluster:"".concat("sa1"),authEndpoint:"".concat("https://app.diib.io/vagas-next/","proc/Controllers/server.php"),auth:{headers:{"Content-Type":"application/json"},params:{name:"".concat(h,"_acomp"),email:"".concat(x,"_acomp")}}});return e.connection.bind("connected",()=>{d(e.subscribe("presence-menu-channel"))}),s.connection.bind("connected",()=>{m(s.subscribe("presence-menu-channel"))}),i(e),c(s),()=>{e.disconnect()}}if(h&&x){console.log("teste sem acompanhante");let e=new(l())("".concat("1f678673e53816425e3a"),{cluster:"".concat("sa1"),authEndpoint:"".concat("https://app.diib.io/vagas-next/","proc/Controllers/server.php"),auth:{headers:{"Content-Type":"application/json"},params:{name:h,email:x}}});return e.connection.bind("connected",()=>{d(e.subscribe("presence-menu-channel"))}),i(e),()=>{e.disconnect()}}},[h,x,_]),(0,a.jsx)(o.Provider,{value:{pusher:n,setPusher:i,channel:u,setChannel:d,userName:h,setUserName:b,userEmail:x,setUserEmail:f,acompanhante:_,setAcompanhante:g,pusherAcomp:r,setPusherAcomp:c,channelAcomp:p,setChannelAcomp:m},children:s})}},6404:(e,s,n)=>{"use strict";n.d(s,{B:()=>r,default:()=>c});var a=n(7437),t=n(2265),i=n(668),l=n(6463),o=n(8472);let r=(0,t.createContext)({menuCount:0,setMenuCount:()=>{},session17:0,setSession17:()=>{},session18:0,setSession18:()=>{},session19:0,setSession19:()=>{},session20:0,setSession20:()=>{},session21:0,setSession21:()=>{},session22:0,setSession22:()=>{}}),c=e=>{let{children:s}=e,[n,c]=(0,t.useState)(0),[u,d]=(0,t.useState)(0),[p,m]=(0,t.useState)(0),[h,b]=(0,t.useState)(0),[x,f]=(0,t.useState)(0),[_,g]=(0,t.useState)(0),[v,j]=(0,t.useState)(0),{channel:N}=(0,t.useContext)(i.V),w=(0,l.useRouter)();return(0,t.useEffect)(()=>{(async()=>{try{(await o.Z.get("".concat("https://app.diib.io/vagas-next/","/proc/Controllers/session.php"))).data.forEach(e=>{switch(e.session_time){case"17:00":d(e.session_users);break;case"18:00":m(e.session_users);break;case"19:00":b(e.session_users);break;case"20:00":f(e.session_users);break;case"21:00":g(e.session_users);break;case"22:00":j(e.session_users)}})}catch(e){console.error("Erro ao buscar sess\xf5es:",e)}})()},[]),(0,t.useEffect)(()=>{null==N||N.bind("pusher:subscription_succeeded",e=>{c(e.count),w.replace("/horarios")}),null==N||N.bind("pusher:member_added",()=>{c(e=>e+1),console.log("Member added")}),null==N||N.bind("pusher:member_removed",()=>{c(e=>e-1),console.log("Member removed")}),null==N||N.bind("client-consume",e=>{if(console.log(e),e.acompanhante)switch(e.session_time){case"17:00":d(e=>e+2);break;case"18:00":m(e=>e+2);break;case"19:00":b(e=>e+2);break;case"20:00":f(e=>e+2);break;case"21:00":g(e=>e+2);break;case"22:00":j(e=>e+2)}else switch(e.session_time){case"17:00":d(e=>e+1);break;case"18:00":m(e=>e+1);break;case"19:00":b(e=>e+1);break;case"20:00":f(e=>e+1);break;case"21:00":g(e=>e+1);break;case"22:00":j(e=>e+1)}})},[N]),(0,a.jsx)(r.Provider,{value:{menuCount:n,setMenuCount:c,session17:u,setSession17:d,session18:p,setSession18:m,session19:h,setSession19:b,session20:x,setSession20:f,session21:_,setSession21:g,session22:v,setSession22:j},children:s})}}},e=>{var s=s=>e(e.s=s);e.O(0,[122,236,130,215,744],()=>s(3640)),_N_E=e.O()}]);